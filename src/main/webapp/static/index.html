<!DOCTYPE html>
<html>
<head>
<script src="jquery-2.0.3.min.js"></script>
<script>
	var testJSON = [{ "words" : [ { "length" : 8, "empty" : false, "type" : "UpperCaseWord", "offset" : 0, "string" : "Skusobny" } ], "id" : 0 }]
	
	function UnHighlight(){
		document.getElementById("myDiv").innerHTML = text
	}
	
	function Highlight(id, text, json) {
		var myJSON = json;
		var highlited = "";
		var lastOffset = 0;
		var lastLength = 0;
		for (var i=0; i < myJSON.length;i++){
			for (var j = 0; j< myJSON[i].words.length; j++){
			console.log(myJSON[i].words[0]);
				highlited += text.substring(lastOffset+lastLength , myJSON[i].words[j].offset+1) +"<span style=\"background-color: #FFFF00\">" + text.substring(myJSON[i].words[j].offset+1, myJSON[i].words[j].offset+1 + myJSON[i].words[j].length) +"</span>";
				lastOffset = myJSON[i].words[j].offset+1
				lastLength = myJSON[i].words[j].length
			}
		}
		document.getElementById(id).innerHTML = highlited
	}
	
		
</script>
<script>
	$( document ).ready(function() {
		$("#text_form").submit(function( event ) {
			var text = $("#text").val();
			$("#text_form").hide();
			event.preventDefault();
			//alert( "Handler for .submit() called: " + text );
			var url = "http://localhost:8080/cz.muni.kisk.rsr/rsr?action=parse&text=" + encodeURIComponent(text);
			jQuery.ajax({ url : url }).done(function(json) { Highlight("higlight", text, JSON.parse(json)); });
		});
	});
</script>
</head>
<body>

<form id="text_form">
  <textarea id="text"></textarea>
  <br />
  <input id="submit" type="submit"></input>
</form>

<div id="higlight" style="width:50%"></div>
<!--
<button onclick="Highlight(testJSON)">Highlight</button>
<button onclick="UnHighlight()">UnHighlight</button>
-->
</body>
</html>
